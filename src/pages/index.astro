---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header";
---

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);

    gsap.to("[data-speed]", {
        y: (i, el) => (1 - parseFloat(el.getAttribute("data-speed"))) * ScrollTrigger.maxScroll(window),
        ease: "none",
        scrollTrigger: {
            start: 0,
            end: "max",
            invalidateOnRefresh: true,
            scrub: 0,
        },
    });

    gsap.fromTo(
        "#fixed-header",
        { opacity: 0, y: -72 },
        {
            opacity: 1,
            y: 0,
            duration: 0.3,
            ease: "power2.out",
            scrollTrigger: {
                trigger: "#amogus",
                start: "top top",
                toggleActions: "play none none reverse",
            },
        }
    );
</script>

<Layout>
    <Header client:load type="static" />
    <Header client:load type="animated" />
    <div class="mt-8 max-w-[90vw] sm:max-w-[80vw] lg:max-w-[70vw] mx-auto">
        <img data-speed="0.32" class="relative w-full mb-[-20%] -z-10" src="floppy_1.svg" />
        <img data-speed="0.49" class="relative w-full mb-[-20%] -z-20" src="floppy_2.svg" />
        <img data-speed="0.66" class="relative w-full mb-[-20%] -z-30" src="floppy_3.svg" />
        <img data-speed="0.83" class="relative w-full mb-[-20%] -z-40" src="floppy_4.svg" />
        <img data-speed="1.00" class="relative w-full -z-50" src="floppy_5.svg" />
    </div>
    <div id="amogus" class="h-[2000px]"></div>
</Layout>
